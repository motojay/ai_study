<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发起授权请求</title>
</head>
<body>
    <button id="authorizeButton">飞书授权登录</button>
    <script>
        document.getElementById('authorizeButton').addEventListener('click', function() {
            // 生成随机的 state 参数
            const state = Math.random().toString(36).substr(2);
            // 将 state 参数存储到 localStorage 中
            localStorage.setItem('feishu_auth_state', state);

            // 假设这是飞书授权的基础 URL，需根据实际情况修改
            const baseAuthUrl = 'https://open.feishu.cn/open-apis/authen/v1/index';
            const redirectUri = encodeURIComponent('https://motojay.github.io/ai_study/auth-callback');
            const appId = 'cli_a891a8bcf43f500c'; // 替换为实际的飞书应用 ID
            const scope = 'contact:contact.base:readonly'; // 替换为实际需要的权限范围

            // 构建完整的授权请求 URL
            const authUrl = `${baseAuthUrl}?redirect_uri=${redirectUri}&app_id=${appId}&scope=${scope}&state=${state}`;

            // 跳转到授权页面
            window.location.href = authUrl;
        });
    </script>
</body>
</html>
